import{a as r,s as x,j as e}from"./index-BzW9ot81.js";import{L as u}from"./loader-circle-BqLNAlLR.js";import{T as j}from"./triangle-alert-B-As14Wm.js";import{S as N}from"./search-B4RUVNFJ.js";function k(){const[l,p]=r.useState([]),[m,n]=r.useState(!0),[c,i]=r.useState(""),[t,h]=r.useState("");r.useEffect(()=>{d()},[]);async function d(){n(!0),i("");const{data:s,error:a}=await x.from("v_in_transit").select("*").order("eta",{ascending:!0}).limit(1e3);a?i(a.message):p(s||[]),n(!1)}const o=t?l.filter(s=>`${s.reference} ${s.customer} ${s.broker} ${s.origin_city} ${s.origin_state} ${s.dest_city} ${s.dest_state}`.toLowerCase().trim().includes(t.toLowerCase().trim())):l;return m?e.jsxs("div",{className:"p-6 flex items-center gap-2",children:[e.jsx(u,{className:"animate-spin"}),e.jsx("span",{children:"Loading in-transit loads…"})]}):c?e.jsxs("div",{className:"p-6 text-red-600 dark:text-red-400 flex items-center gap-2",children:[e.jsx(j,{}),e.jsx("span",{children:c})]}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-lg",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-500"}),e.jsx("input",{value:t,onChange:s=>h(s.target.value),placeholder:"Search reference, customer, broker, city/state…",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900"})]}),e.jsx("button",{onClick:d,className:"px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-800",children:"Refresh"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-neutral-200 dark:border-neutral-800",children:[e.jsx("th",{className:"py-2 pr-4",children:"Reference"}),e.jsx("th",{className:"py-2 pr-4",children:"Customer"}),e.jsx("th",{className:"py-2 pr-4",children:"Broker"}),e.jsx("th",{className:"py-2 pr-4",children:"Driver"}),e.jsx("th",{className:"py-2 pr-4",children:"Truck"}),e.jsx("th",{className:"py-2 pr-4",children:"Origin"}),e.jsx("th",{className:"py-2 pr-4",children:"Destination"}),e.jsx("th",{className:"py-2 pr-4",children:"ETA"}),e.jsx("th",{className:"py-2 pr-4",children:"Problem"}),e.jsx("th",{className:"py-2 pr-4",children:"At Risk"})]})}),e.jsxs("tbody",{children:[o.map(s=>e.jsxs("tr",{className:"border-b border-neutral-100 dark:border-neutral-900 hover:bg-neutral-50 dark:hover:bg-neutral-900/40",children:[e.jsx("td",{className:"py-2 pr-4 font-medium",children:s.reference}),e.jsx("td",{className:"py-2 pr-4",children:s.customer}),e.jsx("td",{className:"py-2 pr-4",children:s.broker}),e.jsx("td",{className:"py-2 pr-4",children:s.driver_name||"-"}),e.jsx("td",{className:"py-2 pr-4",children:s.truck_number||"-"}),e.jsxs("td",{className:"py-2 pr-4",children:[s.origin_city,", ",s.origin_state]}),e.jsxs("td",{className:"py-2 pr-4",children:[s.dest_city,", ",s.dest_state]}),e.jsx("td",{className:"py-2 pr-4",children:s.eta?new Date(s.eta).toLocaleString():"-"}),e.jsx("td",{className:"py-2 pr-4",children:s.problem_flag?"Yes":"No"}),e.jsx("td",{className:"py-2 pr-4",children:s.at_risk?"Yes":"No"})]},s.id)),!o.length&&e.jsx("tr",{children:e.jsx("td",{className:"py-6 text-center text-neutral-500",colSpan:10,children:"No in-transit loads found."})})]})]})})]})}export{k as default};
